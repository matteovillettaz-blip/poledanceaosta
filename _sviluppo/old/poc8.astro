---
import BaseLanding from '../layouts/BaseLanding.astro';
import content from '../data/content.json';
import '../styles/poc8.css';

const navItems = [
  { href: '#home', label: 'Home' },
  { href: '#chi-siamo', label: 'Chi Siamo' },
  { href: '#corsi', label: 'Corsi' },
  { href: '#contatti', label: 'Contatti' }
];
---

<BaseLanding title="Pole Dance Aosta - Immersivo" pocStyle="poc8">
  <!-- Google Fonts -->
  <link slot="head" rel="preconnect" href="https://fonts.googleapis.com" />
  <link slot="head" rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link slot="head" href="https://fonts.googleapis.com/css2?family=Sora:wght@400;500;600;700&display=swap" rel="stylesheet" />

  <!-- Header -->
  <header class="header">
    <a href="#home" class="header__logo">Pole Dance Aosta</a>

    <button class="header__toggle" aria-label="Apri menu">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <nav class="header__nav">
      <ul class="header__nav-list">
        {navItems.map(item => (
          <li><a href={item.href} class="header__nav-link">{item.label}</a></li>
        ))}
      </ul>
    </nav>
  </header>

  <main>
    <!-- Hero - Full Screen Parallax -->
    <section class="hero" id="home">
      <div class="hero__background">
        <div class="hero__bg-layer"></div>
        <div class="hero__overlay"></div>
      </div>

      <div class="hero__content">
        <span class="hero__label">Valle d'Aosta</span>
        <h1 class="hero__title">
          Pole Dance
          <span>Aosta</span>
        </h1>
        <p class="hero__subtitle">{content.hero.subtitle}</p>
        <a href="#corsi" class="hero__cta">
          Scopri i corsi
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="5" y1="12" x2="19" y2="12"></line>
            <polyline points="12 5 19 12 12 19"></polyline>
          </svg>
        </a>
      </div>

      <div class="hero__scroll">
        <span>Scroll</span>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="12" y1="5" x2="12" y2="19"></line>
          <polyline points="19 12 12 19 5 12"></polyline>
        </svg>
      </div>
    </section>

    <!-- About -->
    <section class="reveal-section" id="chi-siamo">
      <div class="reveal-section__container">
        <div class="reveal-content">
          <header class="section-header reveal-child">
            <span class="section-header__label">Chi Siamo</span>
            <h2 class="section-header__title">{content.about.title}</h2>
          </header>

          <div class="about-split">
            <div class="reveal-child">
              <p class="about-split__text">{content.about.description}</p>
              <div class="about-split__values">
                {content.about.values.map((value: string) => (
                  <span class="about-split__value">{value}</span>
                ))}
              </div>
            </div>
            <div class="about-split__visual reveal-child">
              <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
              </svg>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Courses -->
    <section class="reveal-section" id="corsi">
      <div class="reveal-section__container">
        <div class="reveal-content">
          <header class="section-header reveal-child">
            <span class="section-header__label">Percorsi</span>
            <h2 class="section-header__title">{content.courses.title}</h2>
          </header>

          <div class="courses-grid">
            {content.courses.list.map((course: any) => (
              <article class="course-card reveal-child">
                <span class="course-card__level">{course.level}</span>
                <h3 class="course-card__name">{course.name}</h3>
                <p class="course-card__desc">{course.description}</p>
              </article>
            ))}
          </div>
        </div>
      </div>
    </section>

    <!-- Instructors -->
    <section class="reveal-section" id="insegnanti">
      <div class="reveal-section__container">
        <div class="reveal-content">
          <header class="section-header reveal-child">
            <span class="section-header__label">Team</span>
            <h2 class="section-header__title">{content.instructors.title}</h2>
          </header>

          <div class="instructors-row">
            {content.instructors.list.map((instructor: any) => (
              <article class="instructor-portrait reveal-child">
                <div class="instructor-portrait__image">
                  {instructor.name.charAt(0)}
                </div>
                <h3 class="instructor-portrait__name">{instructor.name}</h3>
                <p class="instructor-portrait__role">{instructor.role}</p>
                <p class="instructor-portrait__bio">{instructor.bio}</p>
              </article>
            ))}
          </div>
        </div>
      </div>
    </section>

    <!-- Schedule -->
    <section class="reveal-section" id="orari">
      <div class="reveal-section__container">
        <div class="reveal-content">
          <header class="section-header reveal-child">
            <span class="section-header__label">Orari</span>
            <h2 class="section-header__title">{content.schedule.title}</h2>
          </header>

          <div class="schedule-timeline">
            {content.schedule.weekly.map((day: any) => (
              <div class="schedule-item reveal-child">
                <div class="schedule-item__day">{day.day}</div>
                <div class="schedule-item__classes">
                  {day.classes.map((cls: string) => (
                    <span class="schedule-item__class">{cls}</span>
                  ))}
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </section>

    <!-- Contact -->
    <section class="reveal-section" id="contatti">
      <div class="reveal-section__container">
        <div class="reveal-content">
          <header class="section-header reveal-child">
            <span class="section-header__label">Contatti</span>
            <h2 class="section-header__title">{content.contact.title}</h2>
          </header>

          <div class="contact-wrapper reveal-child">
            <form class="contact-form" action="#" method="POST">
              <label for="contact-name-8" class="sr-only">{content.contact.formLabels.name}</label>
              <input
                type="text"
                id="contact-name-8"
                name="name"
                placeholder={content.contact.formLabels.name}
                class="contact-input"
                required
              />
              <label for="contact-email-8" class="sr-only">{content.contact.formLabels.email}</label>
              <input
                type="email"
                id="contact-email-8"
                name="email"
                placeholder={content.contact.formLabels.email}
                class="contact-input"
                required
              />
              <label for="contact-message-8" class="sr-only">{content.contact.formLabels.message}</label>
              <textarea
                id="contact-message-8"
                name="message"
                placeholder={content.contact.formLabels.message}
                class="contact-textarea"
                required
              ></textarea>
              <button type="submit" class="contact-submit">
                {content.contact.formLabels.submit}
              </button>
            </form>

            <div class="contact-social">
              <a href="https://www.instagram.com/poledanceaosta/" target="_blank" rel="noopener" class="contact-social__link" aria-label="Instagram">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                  <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                  <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                </svg>
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer__logo">Pole Dance <span>Aosta</span></div>
    <p class="footer__copy">&copy; 2024 Pole Dance Aosta. Tutti i diritti riservati.</p>
  </footer>

  <!-- Back to Hub -->
  <a href={import.meta.env.BASE_URL} class="back-to-hub" aria-label="Torna all'hub POC">
    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <line x1="19" y1="12" x2="5" y2="12"></line>
      <polyline points="12 19 5 12 12 5"></polyline>
    </svg>
  </a>
</BaseLanding>

<style>
  .back-to-hub {
    position: fixed;
    bottom: 2rem;
    left: 2rem;
    width: 48px;
    height: 48px;
    background: rgba(10, 10, 10, 0.8);
    backdrop-filter: blur(10px);
    color: #FF1493;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    z-index: 1000;
    border: 1px solid rgba(255, 20, 147, 0.3);
    transition: all 0.3s ease;
  }

  .back-to-hub:hover {
    background: #FF1493;
    color: white;
    transform: scale(1.1);
  }
</style>

<script>
  // Intersection Observer for reveal animations
  const revealElements = document.querySelectorAll('.reveal-content');

  const revealObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('is-visible');
      }
    });
  }, {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  });

  revealElements.forEach(el => revealObserver.observe(el));

  // Parallax effect on scroll (desktop only)
  const hero = document.querySelector('.hero__bg-layer');

  if (window.matchMedia('(min-width: 768px)').matches && hero) {
    window.addEventListener('scroll', () => {
      const scrolled = window.pageYOffset;
      (hero as HTMLElement).style.transform = `translateY(${scrolled * 0.3}px)`;
    });
  }
</script>
